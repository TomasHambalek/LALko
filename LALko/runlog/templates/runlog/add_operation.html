{% extends "runlog/base.html" %}

{% block content %}
<h2>Add new operation</h2>
<form method="post">
    {% csrf_token %}

    {{ form.as_p }}

    <p>
        <button type="button" onclick="setNow('id_start_time')">Set Start Time to Now</button>
        <button type="button" onclick="setNow('id_end_time')">Set End Time to Now</button>
    </p>

    <script>
    function setNow(fieldId) {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const formattedTime = `${year}-${month}-${day} ${hours}:${minutes}`;
        document.getElementById(fieldId).value = formattedTime;
    }
    </script>
    
    <button type="submit">Save</button>
</form>
{% endblock %}